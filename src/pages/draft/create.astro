---
/**
 * FlashDraft - Create Draft Page
 * 
 * Simple redirect page that creates a draft and navigates to it.
 * This avoids complex client-side module loading.
 */

// Get URL parameters
const url = new URL(Astro.request.url);
const seed = url.searchParams.get('seed') || Date.now().toString();
const setCode = url.searchParams.get('set');

// Validate set code
if (!setCode) {
  return Astro.redirect('/draft/new', 302);
}

// Generate draft ID using same pattern as engine
const draftId = `draft_${setCode}_${seed}`;

// Redirect immediately to the draft page
// The DraftInterface will handle creating the draft if it doesn't exist
return Astro.redirect(`/draft/${draftId}/p1p1?new=true&seed=${seed}`, 302);
---