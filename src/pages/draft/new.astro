---
/**
 * FlashDraft - New Draft Page
 * 
 * If a set is provided via URL params, immediately create and redirect.
 * Otherwise, show set selection UI.
 */

import Layout from '../../layouts/Layout.astro';

// Get URL parameters
const url = new URL(Astro.request.url);
const setCode = url.searchParams.get('set');

// If set is provided, redirect to draft with new parameter
if (setCode) {
  const seed = Date.now().toString();
  const draftId = `draft_${setCode}_${seed}`;
  // Redirect to the draft URL with new=true so SimpleDraftRouter creates it
  return Astro.redirect(`/draft/${draftId}/p1p1?new=true&seed=${seed}`, 302);
}
else {
  return Astro.redirect(`/`, 302);
}
---

